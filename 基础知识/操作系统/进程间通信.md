# 进程间通信

### 常见通信方式

1. 管道pipe：
2. 命名管道FIFO：
3. 消息队列MessageQueue：
4. 共享内存SharedMemory:
5. 信号量Semaphore
6. 套接字Socket
7. 信号signal

### 管道

- 管道是**半双工**的，数据只能向一个方向流动；双方互相通信需要建立两个管道

- 匿名管道只能用于父子进程或者兄弟进程之间

- 单独构成一种独立的文件系统；管道对于管道两端的进程而言，就是一个文件，但它不是普通的文件，它不属于某种文件系统，而是单独构成一种文件系统，并且只存在于内从中

&emsp;&emsp;管道的实质是一个内核缓冲区，进程以先进先出的方式从缓冲区存取数据：管道一端的进程顺序地将进程数据写入缓冲区，另一端的进程则顺序地读取数据，该缓冲区可以看做一个循环队列，读和写的位置都是自动增加的，一个数据只能被读一次，读出以后缓冲区都不复存在了。当缓冲区读空或者写满时，有一定的规则控制相应的读进程或写进程是否进入等待队列，当空的缓冲区有新数据写入或慢的缓冲区有数据读出时，就唤醒等待队列中的进程继续读写。

​		**管道通信需要四次数据拷贝：**

1. 由用户空间缓冲区中将数据拷贝到内核空间缓冲区中
2. 内核空间缓冲区将数据拷贝到内存中
3. 内存将数据拷贝到到内核缓冲区
4. 内核空间缓冲区到用户空间缓冲区.

### 共享内存

​		共享内存允许两个或多个进程共享一个给定的存储区，这一段存储区可以被两个或两个以上的进程映射至自身的地址空间中，一个进程写入共享内存的信息，可以被其他使用这个共享内存的进程，通过一个简单的内存读取读出，从而实现了进程间的通信。

​		**共享内存需要两次数据拷贝：**

1. 用户空间到内存
2. 内存到用户空间

### 参考资料

https://www.cnblogs.com/LUO77/p/5816326.html